package nl.utwente.fmt.ieaatparser.prm

import ics.eaat.abstractmodeller.newmodel.ClassModel
import java.io.EOFException
import java.io.IOException
import java.io.InputStream
import java.io.ObjectInputStream

fun readClassModel(inStream : InputStream) : ClassModel {
    ObjectInputStream(inStream.buffered()).use {
        try {
            return it.readObject() as ClassModel
        } catch(e: EOFException) {
            println("Reached end of file")
        }
    }
    throw IOException("Failed to correctly read all data, invalid file perhaps?")
}