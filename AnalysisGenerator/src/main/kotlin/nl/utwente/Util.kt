package nl.utwente

import org.eclipse.epsilon.emc.emf.EmfModel
import org.eclipse.epsilon.emc.emf.InMemoryEmfModel
import java.io.OutputStream

fun String.ensureEndsWith(suffix : CharSequence): String {
    val out = StringBuilder().append(this)
    if(!this.endsWith(suffix)) {
        if (!suffix.startsWith('.'))
            out.append('.')
        out.append(suffix)
    }
    return out.toString()
}

/**
 * Converts this emfmodel to an in-memory model with the given name
 * The model is loaded
 */
fun EmfModel.inMemory(name: String): EmfModel {
    this.load()
    return InMemoryEmfModel(name,this.resource)
}

fun OutputStream.writeln() = this.write('\n'.toInt())